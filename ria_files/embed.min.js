function SyncR_Callback(e){window.rnetplus_acquirePortrait(e)}function acquirePortraitCallbackFunc(e){window.rnetplus_acquirePortraitCallback(e)}function onBlocksDataLoadedCallback(e){window.rnetplus_blocksDataLoadedCallback(e)}!function(){function e(){return y}function t(){return("null"==C||""==C||"KgAAAPfwGFhuL9dlAQyTBAB="==C)&&(C=null),C}function n(e,t){return(t?"":"?")+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}function r(e,t,n){var r=t.innerHeight||n.documentElement.clientHeight,a=t.innerWidth||n.documentElement.clientWidth,i=e.top+e.height/2,o=e.left+e.width/2;return o>=0&&i>=0&&a>=o&&r>=i}function a(e){try{return i(e)}catch(t){return!0}}function i(e){if("function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),window!==top){for(var t=top.document.getElementsByTagName("iframe"),n=0;n<t.length;++n){var r=o(t[n],top,top.document);if(r)return!0}return!1}return o(e,window,document)}function o(e,t,n){if(0===e.offsetWidth||0===e.offsetHeight)return!1;for(var a=n.documentElement.clientHeight,i=e.getClientRects(),o=function(t,n){var r=(t.left+t.right)/2,a=(t.top+t.bottom)/2,i=n.elementFromPoint(r,a);if(i===e)return!0;if(!i)return!1;for(;i.parentElement;){if(i.parentElement===e)return!0;i=i.parentElement}return!1},l=0,c=i.length;c>l;l++){var s=i[l],d=s.top>0?s.top<=a:s.bottom>0&&s.bottom<=a,u=d&&o(s,n),h=u&&r(s,t,n);if(d&&u&&h)return!0}return!1}function l(e,t){return function(){for(var n=0;n<S.length;++n)if(S[n].getDiv()==e){var r=a(e);if(r){if("function"==typeof t&&t(S[n]),S.splice(n,1),0==S.length)break;--n}}}}function c(e,t){t&&s(e,top),s(e,window)}function s(e,t){t.addEventListener?(t.addEventListener("load",e,!1),t.addEventListener("scroll",e,!1),t.addEventListener("resize",e,!1)):window.attachEvent&&(t.attachEvent("onload",e),t.attachEvent("onscroll",e),t.attachEvent("onresize",e)),t.setInterval(e,200)}function d(e,t){e.innerHTML=t;var n=[];ret=e.childNodes;for(var r=0;ret[r];r++)!n||!u(ret[r],"script")||ret[r].type&&"text/javascript"!==ret[r].type.toLowerCase()||n.push(ret[r].parentNode?ret[r].parentNode.removeChild(ret[r]):ret[r]);for(script in n)h(n[script])}function u(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()}function h(e){data=e.text||e.textContent||e.innerHTML||"";var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",n.appendChild(document.createTextNode(data)),t.insertBefore(n,t.firstChild),t.removeChild(n),e.parentNode&&e.parentNode.removeChild(e)}function m(){var t=new Image;t.src="https://sync.rambler.ru/set?partner_id="+k+"&id="+e()+"&dt="+Math.round((new Date).getTime()/1e3),p()}function p(){var t=document.createElement("script");t.src="https://sync.rambler.ru/emily?partner_id="+b+"&id="+e()+"&dt="+(new Date).getTime(),document.getElementsByTagName("head")[0].appendChild(t)}function f(e){window.localStorage&&(window.localStorage.setItem(T+".ruid",e),window.localStorage.setItem(T+".ruid.stamp",Math.round((new Date).getTime()/1e3))),C=e,e||(e="KgAAAPfwGFhuL9dlAQyTBAB=");var t=document.createElement("script");t.src="https://bacon.rambler.ru/api/data/v1.5/user.get?app_id="+b+"&callback=acquirePortraitCallbackFunc&ruid="+e,document.getElementsByTagName("head")[0].appendChild(t)}function g(e){var t,n,r=e.data;for(_="",t=0;t<r.length;++t){var a=r[t].segment,i="";for(n=0;n<a.length;++n)a[t].prob&&parseFloat(a[t].prob)<.8||(i.length>0&&(i+=","),i+=a[n].id);0!=i.length&&(_.length>0&&(_+=";"),_+=i)}window.localStorage&&window.localStorage.setItem(T+".ruid.rp",_),E(),window.setInterval(E,200)}function w(e,t){if(this.blockId=t.blockId,this.transitUrl=t.transitUrl,this.skipTransitPage=t.skipTransitPage,e.Utm&&(this.transitUrl+=this.transitUrl.indexOf("?")>0?"&":"?",this.transitUrl+=e.Utm),this.model=e,this.containerElement=this.createPlaceHolder(t.containerElement,"teaser-container","div"),e.Raw)d(this.containerElement,e.Raw);else{if("Text"!=e.Type&&(this.divImgElement=this.createPlaceHolder(this.containerElement,"teaser-image-container","div"),this.imgAnchorElement=this.createImageAnchor(this.divImgElement)),"Picture"!=e.Type&&(this.divTitleElement=this.createPlaceHolder(this.containerElement,"teaser-title-container","div"),this.contentAnchorElement=this.createContentAnchor(this.divTitleElement)),"Recomender"==e.Type){var n=this.divTextElement=this.createPlaceHolder(this.containerElement,"teaser-text","p");n.textContent=this.model.Annotation}this.separatorElement=this.createPlaceHolder(this.containerElement,"separator","hr")}}function v(e,t){this.blockId=e,this.elementId=t,this.containerElement=document.getElementById(this.elementId)}function I(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.BlockId,i=U[r];if(i.blockId=r,i.containerElement){var o=document.createElement("style");if(o.innerHTML=n.Stylesheet.replace(/<embed_div_id>/g,i.elementId),document.getElementsByTagName("head")[0].appendChild(o),i.setData(n),i.skipTV||a(i.containerElement))i.show();else{S.push(i);var s=l(i.containerElement,function(e){e.show()});try{c(s,i.iframed)}catch(d){i.show(),S.splice(S.length-1,1)}}}}}function E(){var e=window[window.RamblerExchangeObject].q;if(window[window.RamblerExchangeObject].q=[],null!=e&&0!=e.length){for(var t={},n=0;n<e.length;++n){var r=e[n];x=r[0];for(var a=r[1],i=0;i<a.length;i++){var o=a[i],l=o.blockId;U[l]=new v(l,o.elementId),t[l]=U[l]}}var c=document.createElement("script");c.src=x+"/Block/Data?ids="+Object.keys(U).join(",")+"&userId="+y+"&screen="+window.screen.width+"x"+window.screen.height+"&rp="+_+"&callback=onBlocksDataLoadedCallback",document.getElementsByTagName("head")[0].appendChild(c)}}var x,b="a8422396-8b51-4eb1-a7b2-163540ede795",k="rnetplus",T="RamblerExchangeUserId",y="",C="",P=Math.round((new Date).getTime()/1e3),_="",S=[],U={};window.rnetplus_acquirePortrait=f,window.rnetplus_acquirePortraitCallback=g,window.rnetplus_blocksDataLoadedCallback=I;var H=function(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})};if(window.localStorage){y=window.localStorage.getItem(T),y||(y=H(),window.localStorage.setItem(T,y));var A=window.localStorage.getItem(T+".ruid.stamp");A&&parseInt(A)+86400<P&&(window.localStorage.removeItem(T+".ruid"),window.localStorage.removeItem(T+".ruid.stamp"),window.localStorage.removeItem(T+".ruid.rp")),C=window.localStorage.getItem(T+".ruid"),_=window.localStorage.getItem(T+".ruid.rp")}var B=function(e){var t=e.method||"GET",r=e.url,a=e.success,i=e.error,o=e.data,l=new XMLHttpRequest;l.onload=function(){l.status>=200&&l.status<400?a&&a(l.responseText):i&&i(l)},l.onerror=function(){i&&i(l)},"GET"===t&&o&&(r+=n(o,!1)),l.open(t,r,!0),"POST"===t?(l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(n(o,!0))):l.send()};return w.prototype.createImageAnchor=function(e){var t=null;if(this.model.ImageUrl){t=this.createPlaceHolder(e,"teaser-image-anchor","a"),t.href=this.getUrl(),t.target="_blank";var n=this.createPlaceHolder(t,"teaser-image","img");n.src=this.model.ImageUrl}return t},w.prototype.createContentAnchor=function(e){var t=this.createPlaceHolder(e,null,"div"),n=this.createPlaceHolder(t,"main-anchor","a");n.href=this.getUrl(),n.target="_blank";var r=this.createPlaceHolder(n,"teaser-title","h2");return r.textContent=this.model.Title,r.style="cursor: pointer;",n},w.prototype.createPlaceHolder=function(e,t,n){var r=document.createElement(n?n:"div");return t&&(r.className=t),e.appendChild(r),r},w.prototype.getUrl=function(){var e=this,t="?block_id="+e.blockId+"&teaser_id="+e.model.Id+"&user_id="+y;if(this.skipTransitPage&&!this.model.IsAd)t+="&count_jump=true",t+="&orig_url="+encodeURIComponent(this.model.Url);else{var r=this.transitUrl.includes("?");t+="&count_jump=false",t+="&orig_url="+encodeURIComponent(this.transitUrl+(r?"&":"")+n({id:this.model.Id,block_id:this.blockId,user_id:y},r))}return x+"/Service/TeaserClicked"+t},v.prototype.getDiv=function(){return this.containerElement},v.prototype.setData=function(e){this.transitUrl=e.TransitUrl,this.skipTransitPage=e.SkipTransitPage,this.skipTV=0==e.TV,this.iframed=!!window.frameElement;var t=e.Teasers;this.teasers=[],this.teaserIds=[],this.flightIds=[];for(var n=0;n<t.length;n++){var r=t[n];this.teasers.push(new w(r,this)),this.teaserIds.push(r.Id),this.flightIds.push(r.FlightId)}},v.prototype.show=function(){var e=this;B({url:x+"/Block/BlockShowed",method:"POST",data:{blockId:e.blockId,teaserIds:e.teaserIds.join(),flightIds:e.flightIds.join(),userId:y}})},t()?(E(),void window.setInterval(E,200)):void m()}();