window.ANEWS_HOST="//www.anews.com/";var AnewsWidget=window.AnewsWidget=function(e,t,n){void 0===e.ANEWS_HOST&&(e.ANEWS_HOST="//anews.com");var i=e.location,a={default:{css:e.ANEWS_HOST+"s/css/widget.css",image:[200,140],utm:null,logo:"http://widget.anews.ru/sdk/image/logo.png",logo2x:"http://widget.anews.ru/sdk/image/logo_x2.png",template:'<anewswidget class="anews-widget anews-widget-theme-<%=options.theme%>" style="height:<%=options.height%>px;width:<%=options.width%>px"><anewswidget class="anews-widget-head"><a class="anews-widget-logo-link" href="//www.anews.com/"><img src="<%=ratio == 1 ? theme.logo : theme.logo2x %>" class="anews-widget-logo" alt="" /></a>Читайте на Anews:</anewswidget><anewswidget class="anews-widget-content"><% for ( var i in items ) { var item = items[i]; %><anewswidget class="anews-widget-item"><anewswidget class="anews-widget-item-image"><a class="anews-widget-item-link" href="<%=getLink(item)%>"><img class="anews-widget-item-image-pic" src="<%=getImage(item)%>" alt="<%=item.img_alt%>" /></a></anewswidget><anewswidget class="anews-widget-item-title"><a class="anews-widget-item-title-link" href="<%=getLink(item)%>"><%=item.title%></a></anewswidget></anewswidget><% } %></anewswidget></anewswidget>',after:function(e){for(var t,n=e.el.getBoundingClientRect().bottom,i=e.el.getElementsByClassName("anews-widget-item"),a=!0,s=i.length-1;s>=0&&a;s--)t=i[s],t.getBoundingClientRect().bottom>n?t.remove():a=!1}}};a.light=a.dark=a.wide=a.default;var s=[],o=[],r=["width","height","source","region","updateTime","id","theme"],m={posts:function(t){return e.ANEWS_HOST+"api/v2/web/streams/"+t+"/posts/"},stream:function(t){return e.ANEWS_HOST+"api/v4/stream/"+t+"/posts/?page=1&size=20"},top:function(t){return e.ANEWS_HOST+"api/v2/web/regions/"+t+"/top/"},theme:function(t){return e.ANEWS_HOST+"s/js/widget_theme_"+t+".js"}},l=function(){var e={};return function n(i,a){var s=/\W/.test(i)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[i]=e[i]||n(t.getElementById(i).innerHTML);return a?s(a):s}}(),d=function(t,n,i,a,s,o,r){o=e.document,s=0,i=o.createElement("script"),a=o.getElementsByTagName("head")[0],r=a.parentNode,i.async=1,i.onload=i.onreadystatechange=function(){var e=this;s||e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(s=1,i.onload=i.onreadystatechange=null,r.removeChild(i),n(null))},i.onerror=n,i.src=t,r.insertBefore(i,a)},c=function(e,t,n,i,a){var s,o;try{o=new XMLHttpRequest}catch(e){try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return console&&console.log("XMLHttpRequest not supported"),null}}s=setTimeout(function(){o.abort(),t(new Error("aborted by a timeout"),"",o)},2e4),o.onreadystatechange=function(){4==o.readyState&&(clearTimeout(s),t(200!=o.status&&new Error("server respnse status is "+o.status),o.responseText,o))},o.open(n?n.toUpperCase():"GET",e,!0),i?(o.setRequestHeader("Content-type",a||"application/x-www-form-urlencoded"),o.send(i)):o.send()},w=function(e,t){var n;e=e||{},t=t||{};for(var i=0;i<r.length;i++)n=r[i],e[n]=t[n]||e[n];return e},u=function(n){var r,u=t.body;if("string"==typeof n&&(n=t.getElementById(n)),!n||"object"!=typeof n||!(n instanceof Node)||s.indexOf(n)>-1)return null;r={el:n,theme:{},ratio:e.devicePixelRatio&&e.devicePixelRatio>1?Number(e.devicePixelRatio):1,items:[],getLink:function(e,t){return"//www.anews.com/p/"+e.id+"/?utm_source="+(void 0!==t&&t?t:i.hostname)+"&utm_campaign=informer&utm_content="+e.id+"&utm_referrer="+i.hostname},getImage:function(e){var t=this.theme.image,n=this.ratio,a=e.img;return"//"==a.substr(0,2)&&(a=i.protocol+a),"//img.anews.com?w="+Math.ceil(t[0]*n)+"&h="+Math.ceil(t[1]*n)+"&url="+a},options:{theme:"default",width:240,height:400,source:"top",region:"ru",updateTime:0,id:null}},r.options=w(r.options,n.dataset),s.push(n);var g=function(){var e;r.theme=a[r.options.theme]||a.default,e=m[r.options.source](r.options.region),c(e,function(e,n){var i=r.theme.css,a=o.indexOf(i)>-1,s=r.theme.after instanceof Function;try{r.items=JSON.parse(n),r.items&&r.items.results&&(r.items=r.items.results),r.el.innerHTML=l(r.theme.template,r)}catch(e){}if(a&&s&&r.theme.after.call(r.theme,r),i&&!a){var m=t.createElement("link");m.setAttribute("type","text/css"),m.setAttribute("rel","stylesheet"),m.setAttribute("href",i),u.appendChild(m),m.onload=function(){s&&r.theme.after.call(r.theme,r)},o.push(i)}})};a[r.options.theme]?g():d(m.theme(r.options.theme),g),updateTime=parseInt(r.options.updateTime,10),!isNaN(updateTime)&&updateTime>=30&&setInterval(g,1e3*updateTime)};u.theme=function(e,t){var n,i;if("string"!=typeof e)throw new Error("Theme name must be String");return t=t||{},i=t.image,n={css:t.css,template:t.template||"",image:i instanceof Array&&2==i.length&&i[0]>0&&i[1]>0?i:a.default.image},a[e]=n};return function(e){"interactive"===t.readyState||"complete"===t.readyState?e():t.addEventListener("DOMContentLoaded",e)}(function(e){for(var n=t.getElementsByClassName("anews-web-widget"),i=0,a=n.length;i<a;i++)u(n[i])}),u}(window,document);